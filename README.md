# マイコン講習会リポジトリへようこそ

このリポジトリは、マイコン講習会で使用するテキストやソースコードを管理するためのものです。

## 講習会のコンセプト

本講習会は、「Arduino IDEからのステップアップ」をテーマにしています。
より本格的な開発環境である**PlatformIO**と、安価で高性能なマイコンボード**Raspberry Pi Pico**を用いて、各種センサーやアクチュエーターの扱いに慣れ親しむことで、実践的なマイコン開発の世界へ入門することを目指します。

## リポジトリの構成

-   `texts/`
    -   各チャプターのテキスト（mkdocs形式）が格納されています。
-   `src/`
    -   各チャプターに対応するソースコードが格納されています。
    -   これらはPlatformIOで書き込み可能なプロジェクト形式になっています。

## 講習内容の予定

本講習会では、以下の項目について学習を進めることを想定しています。

1.  マイコンの基礎知識
2.  C/C++言語での "Hello, World"（Lチカ）
3.  各種センサー・アクチュエーターの基本的な使い方
4.  応用的な作例の制作 1〜2点

## 使用する機材

-   **マイコンボード**: `Raspberry Pi Pico ベーシックセット`
-   **ブレッドボード・ジャンパワイヤ**: 1セット
-   **サーボモーター**: `SG90`
-   **6軸センサー**: `MPU-6050`
-   **フォトリフレクタ**: `LBR-127HLD`
-   **その他**: 抵抗などの電子部品

## 達成したい目標
ただセンサーやアクチュエータを使えるようにするだけでなく、回路の仕組み、信号の流れ、そしてプログラムの構造を理解し、実際に自分で回路を設計できるようになることを目指します。
そのために、LEDの点滅では、抵抗の計算からはじめます。またセンサーやアクチュエータについても、ただ動かして見るだけではなく、どんな信号の規格があって、どんな信号がやり取りされているのかを理解することを重視します。もちろん、物理的、電気的な側面をおろそかにはせず、寄生容量や、プルアップ抵抗など、実際の回路設計に必要な知識も学びます。
回路図は必ず作成しパソコンの画面だけで完結することはせず、実際に手を動かして回路を組み立てることを重視します。

## 達成したい目標（詳細）

本講習会は、単なる入門を超え、参加者が自立した開発者としての一歩を踏み出すための「思考のフレームワーク」を提供することを目的とします。そのために、以下のような発展的・横断的なトピックにも積極的に触れていきます。話が発散することもありますが、それこそが知識のネットワークを構築する上で重要だと考えます。気になるトピックは `<details>` タグで深掘りできるようにします。

1.  **電気・回路の基礎原理の探求**:
    *   **オームの法則と電力計算**: なぜ抵抗にワット数定格があるのか？(P=IV)
    *   **プルアップ/プルダウン抵抗**: なぜ必要か？値の選び方、内部プルアップの活用法と限界。
    *   **コンデンサの役割**: パスコン（バイパスコンデンサ）による電源安定化、サーボのジッター抑制。
    *   **信号の品質（シグナルインテグリティ）**: ブレッドボードの寄生容量、クロストークが高速信号に与える影響。
    *   **論理レベル(Logic Level)**: なぜ3.3Vが主流なのか？5V系との接続（レベルシフタ）。

2.  **マイコンの核心機能の理解**:
    *   **割り込み（Interrupts）**: ポーリング(`loop`)との違い。`attachInterrupt`を使い、応答性の高いプログラムを作る。
    *   **タイマー/カウンター**: `delay()`の正体。`millis()`を使ったノンブロッキングな処理の実装。
    *   **ADC（A/Dコンバータ）の深層**: 分解能、サンプリングレート、量子化誤差、エリアシングとは何か。
    *   **デバウンス**: スイッチの物理的なチャタリングと、ハードウェア/ソフトウェアでの対策。
    *   **メモリ管理**: `String`クラスの危険性。スタックとヒープ、メモリ断片化の問題。

3.  **通信プロトコルの水平展開**:
    *   **I2Cの深掘り**: アドレス衝突、クロックストレッチ、バススキャン、マルチマスター。
    *   **SPI (Serial Peripheral Interface)**: I2Cとの比較。全二重通信、チップセレクトの役割、デイジーチェーン。
    *   **UARTの再訪**: 同期式（I2C/SPI）と非同期式（UART）の違い。パリティ、ストップビット。
    *   **ビットバンギング (Bit Banging)**: ライブラリを使わず、`digitalWrite`で通信プロトコルを自作して仕組みを理解する。

4.  **センサー・アクチュエーターの高度な利用**:
    *   **センサーフュージョン**: なぜ加速度センサーだけでは傾きが分からないのか？（ノイズとドリフト）
    *   **相補フィルター**: 加速度とジャイロを組み合わせ、安定した角度を算出するシンプルな実装。
    *   **カルマンフィルター**: 相補フィルターの先にある、より高度なセンサーフュージョン手法の紹介。
    *   **MPU-6050のDMP**: センサー内部のプロセッサを使い、マイコンの負荷を下げて姿勢角を得る。
    *   **サーボモーターの内部構造**: DCモーター、ポテンショメータ、制御回路の関係。

5.  **開発手法と設計思想**:
    *   **データシートの読解**: 電気的特性、レジスタマップから必要な情報を引き出す技術。
    *   **状態管理（ステートマシン）**: `if`文のネスト地獄を避け、複雑な動作を整理して実装する。
    *   **PlatformIOの高度な使い方**: デバッガの活用、ユニットテストの導入。
